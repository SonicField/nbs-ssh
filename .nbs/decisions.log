# Decisions Log

Append all significant decisions using this format:

---
[YYYY-MM-DD HH:MM] [DECISION TITLE]
Context: [why this decision was needed]
Decision: [what was decided]
Implication: [what this means for the work]
---

---
[2026-02-04 05:55] PROTOCOL ENGINE SELECTION
Context: Need to choose SSH protocol implementation - Paramiko vs AsyncSSH
Decision: Use AsyncSSH as the protocol engine
Implication: Get proper keepalive semantics with interval + count_max for freeze detection. Async-first design. Paramiko's set_keepalive() doesn't provide the same "fail after N unanswered keepalives" behaviour.
---

---
[2026-02-04 05:55] PYTHON VERSION
Context: Available Python version in ~/local/cpython
Decision: Use Python 3.12.12 (venv at ~/local/nbs-ssh/venv)
Implication: Free-threaded Python (3.14t) benefits mentioned in spec are optional future enhancement. Core work is async-first.
---

---
[2026-02-04 06:05] DEPENDENCIES INSTALLED
Context: Need asyncssh and testing libraries
Decision: Installed via pty-session with proxy: asyncssh-2.22.0, pytest-9.0.2, pytest-asyncio-1.3.0, hypothesis-6.151.5
Implication: All core dependencies available. pty-session bypasses Claude agent proxy restrictions.
---

---
[2026-02-04] REPLACE DOCKER WITH MOCK SSH SERVER
Context: Docker-based testing only proves client works with one SSH implementation. Cannot test edge cases, security attacks, or run on Windows without Docker.
Decision: Build pure-Python mock SSH server using AsyncSSH server capabilities. Bind port 0, expose assigned port. Server actively attempts attacks (weak ciphers, malformed data, connection drops) to falsify client security claims.
Implication: Tests become truly falsifiable - "we tried to break it and couldn't" rather than "it works with OpenSSH in Docker". Cross-platform. No external dependencies. Parallel test execution.
---

